@page"/"
@using MiniTwit.API.Controllers
@using MiniTwit.Entities
@using MiniTwit.Models
@inject MiniTwitController controller
@inject NavigationManager NavManager

@if (currentUser != null)
{
    <Timeline messages="@messages"/>
}

@code{

    public User currentUser = null;
    public IEnumerable<TimelineDTO> messages;
    
    protected override async Task OnInitializedAsync()
    {
        currentUser = controller.GetCurrentUser();
        if (currentUser == null) NavManager.NavigateTo("/public");

        messages = await controller.GetFeed();
    }

}